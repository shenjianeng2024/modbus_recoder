---
last_sync: 2025-09-10T04:07:26Z
name: 应用打包和部署优化
status: open
created: 2025-09-09T04:10:01Z
updated: 2025-09-09T04:10:01Z
github: [Will be updated when synced to GitHub]
depends_on: [001, 009]
parallel: true
conflicts_with: []
---

# Task: 应用打包和部署优化

## Description

配置应用的跨平台打包、安装程序生成和部署优化，确保最终产品可以在目标平台顺利安装和运行，包括性能优化和用户文档准备。

## Acceptance Criteria

- [ ] 配置Tauri打包设置，支持Windows/macOS/Linux三平台
- [ ] 优化应用图标、应用信息和版本管理
- [ ] 配置安装程序生成（.msi/.dmg/.deb/.AppImage）
- [ ] 实现应用性能优化（启动时间、内存使用、包大小）
- [ ] 创建用户手册和安装说明文档
- [ ] 配置代码签名和应用证书（如需要）
- [ ] 建立发布流程和版本管理策略

## Technical Details

### 打包配置

1. **Tauri配置优化**:
   ```json
   // src-tauri/tauri.conf.json
   {
     "package": {
       "productName": "Modbus Reader",
       "version": "1.0.0"
     },
     "tauri": {
       "bundle": {
         "active": true,
         "targets": ["msi", "nsis", "deb", "appimage", "dmg"],
         "identifier": "com.company.modbus-reader",
         "icon": [
           "icons/32x32.png",
           "icons/128x128.png",
           "icons/128x128@2x.png",
           "icons/icon.icns",
           "icons/icon.ico"
         ],
         "category": "Utility",
         "shortDescription": "Modbus TCP/IP数据采集工具",
         "longDescription": "专为实验室环境设计的Modbus设备数据读取和记录工具"
       }
     }
   }
   ```

2. **构建优化**:
   ```toml
   # src-tauri/Cargo.toml
   [profile.release]
   opt-level = "s"          # 优化文件大小
   lto = true              # 链接时优化
   codegen-units = 1       # 减少代码生成单元
   panic = "abort"         # 减少panic处理开销
   strip = true            # 剥离调试信息
   ```

3. **前端构建优化**:
   ```typescript
   // vite.config.ts
   export default defineConfig({
     build: {
       minify: 'terser',
       rollupOptions: {
         output: {
           manualChunks: {
             vendor: ['react', 'react-dom'],
             ui: ['@radix-ui/react-dialog', '@radix-ui/react-select']
           }
         }
       }
     }
   });
   ```

### 应用资源

1. **图标设计**:
   ```
   icons/
   ├── 32x32.png       # Windows小图标
   ├── 128x128.png     # 标准图标
   ├── 128x128@2x.png  # 高分辨率图标
   ├── icon.icns       # macOS图标
   ├── icon.ico        # Windows图标
   └── Square*.png     # Windows Store图标
   ```

2. **应用元数据**:
   - 应用名称：Modbus Reader
   - 版本号：语义化版本管理
   - 描述：简洁明确的功能描述
   - 类别：实用工具
   - 供应商信息：公司/开发者信息

### 部署策略

1. **GitHub Releases自动发布**:
   ```yaml
   # .github/workflows/release.yml
   name: Release
   on:
     push:
       tags: ['v*']
   jobs:
     release:
       runs-on: ${{ matrix.os }}
       strategy:
         matrix:
           os: [ubuntu-latest, windows-latest, macos-latest]
       steps:
         - name: Build and Release
           run: pnpm tauri build
         - name: Upload to Release
           uses: softprops/action-gh-release@v1
   ```

2. **版本管理**:
   - 自动版本号更新
   - 变更日志生成
   - 标签和发布管理

### 性能优化目标

1. **启动性能**:
   - 应用启动时间 < 3秒
   - 首次界面渲染 < 1秒
   - 资源加载优化

2. **运行性能**:
   - 内存占用 < 100MB
   - CPU使用率 < 5%（空闲时）
   - 响应时间 < 100ms

3. **包大小优化**:
   - 总安装包 < 50MB
   - 依赖库精简
   - 资源压缩

### 用户文档

```markdown
# Modbus Reader 用户手册

## 安装说明
### Windows
1. 下载 modbus-reader-1.0.0-setup.exe
2. 双击运行安装程序
3. 按提示完成安装

### macOS  
1. 下载 modbus-reader-1.0.0.dmg
2. 双击挂载镜像
3. 将应用拖到Applications文件夹

### Linux
1. 下载对应的.deb或.AppImage文件
2. Ubuntu/Debian: sudo dpkg -i modbus-reader-1.0.0.deb
3. 其他发行版：chmod +x modbus-reader-1.0.0.AppImage && ./modbus-reader-1.0.0.AppImage

## 快速开始
1. 启动应用
2. 配置Modbus设备IP和端口
3. 设置地址范围
4. 开始数据采集

## 故障排除
- 连接问题
- 性能问题
- 数据导出问题
```

## Dependencies

- [ ] 基础项目结构（任务001）
- [ ] 测试框架完成（任务009）
- [ ] 应用图标设计资源
- [ ] 文档写作和技术写作

## Effort Estimate

- Size: M
- Hours: 12-16小时
- Parallel: true（与功能开发并行）

## Definition of Done

- [ ] 应用可以在三个主要平台成功打包和安装
- [ ] 安装程序生成正确，用户可以正常安装使用
- [ ] 应用性能达到预设目标（启动、内存、响应）
- [ ] 包大小在合理范围内，下载体验良好
- [ ] 用户文档完整，包含安装和使用说明
- [ ] 发布流程自动化，支持版本管理
- [ ] 应用图标和界面视觉效果专业